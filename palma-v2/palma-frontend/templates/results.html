{% extends "layout.html" %}
{% block content %}
{% set title = "Results | PalmaCount" %}

<div class="w-full max-w-7xl mx-auto flex flex-col lg:flex-row gap-6 py-10 px-4">
  <!-- Left Container -->
  <div class="lg:w-1/3 w-full bg-stone-100 rounded-xl shadow-xl border p-6 flex flex-col items-center overflow-auto">
    <h1 class="text-3xl font-semibold text-green-800 mb-4">Analysis Result</h1>
    <p class="text-gray-600 mb-6 text-center">Your image has been successfully analyzed.</p>

    <img id="analyzedImage"
      src="{{ url_for('static', filename='output.jpg') }}"
      alt="Detected Image"
      class="w-full max-w-[600px] h-auto object-cover rounded-xl border shadow cursor-zoom-in mb-2" />

    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden cursor-zoom-out">
      <img id="modalImage" src="{{ url_for('static', filename='output.jpg') }}" class="max-w-full max-h-full shadow-xl" />
    </div>

    <p class="text-sm text-gray-700 mb-6">Click on the image to view it in fullscreen</p>

    <div class="flex flex-wrap gap-4 justify-center mb-4">
      <a href="{{ url_for('upload') }}" class="px-6 py-3 bg-green-600 text-white font-semibold rounded-xl shadow hover:bg-green-800 transition duration-300">
        Analyze Another Image
      </a>
      <a href="{{ url_for('dashboard') }}" class="px-6 py-3 bg-neutral-400 text-white font-semibold rounded-xl shadow hover:bg-gray-600 transition duration-300">
        Back to Home
      </a>
    </div>
  </div>

  <!-- Right Container -->
  <div class="lg:w-2/3 w-full bg-stone-100 rounded-xl shadow-xl border p-6 overflow-auto">
    <div class="w-full flex items-center justify-between mb-6">
      <p class="text-3xl font-bold text-green-800">Details</p>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
      <div class="bg-green-50 rounded-xl shadow-md border border-gray-200 p-5 hover:shadow-lg transition">
        <p class="text-sm text-green-800 font-medium mb-2">Mature Trees</p>
        <p class="text-3xl font-bold text-green-700">{{ totals.mature }}</p>
      </div>
      <div class="bg-green-50 rounded-xl shadow-md border border-gray-200 p-5 hover:shadow-lg transition">
        <p class="text-sm text-green-800 font-medium mb-2">Young Trees</p>
        <p class="text-3xl font-bold text-green-700">{{ totals.young }}</p>
      </div>
      <div class="bg-green-100 rounded-xl shadow-md border border-gray-200 p-5 hover:shadow-lg transition">
        <p class="text-sm text-green-900 font-medium mb-2">Total Trees</p>
        <p class="text-3xl font-bold text-green-900">{{ totals.total }}</p>
      </div>
    </div>
  </div>
</div>

<script>
  const modal = document.getElementById('imageModal');
  const analyzedImage = document.getElementById('analyzedImage');

  analyzedImage.addEventListener('click', () => modal.classList.remove('hidden'));
  modal.addEventListener('click', () => modal.classList.add('hidden'));
</script>

{% endblock %}
